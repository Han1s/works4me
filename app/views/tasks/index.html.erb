
<style>
.navbar-lewagon {
  background: rgba(244,183,147, 1);  /*(10,14,79, 1)*/

  width: 100%;
  }
  .navbar-brand {
    color: white !important;
  }
</style>


<%= link_to "all", tasks_path, class: "btn btn-primary" %>

<% Task.all_categories.each do |category| %>
  <%= link_to category, tasks_path(category: category), class: "btn btn-primary" %>
<% end %>


<div class="wrapper_index">

  <div class="cards" id="cardgrid">
    <% @tasks.each do |task| %>
    <div class="card_task">
      <img src="https://raw.githubusercontent.com/lewagon/fullstack-images/master/uikit/greece.jpg">
      <div class="card_task_infos">
        <div>
          <h2><%= link_to "#{task.name}",task_path(task.id) %></h2>
          <p>Status: <%= task.status %> (<%= task.category %> )</p>
          <p>Owner: <%= task.owner.first_name %></p>
        </div>
        <h2 class="card_task_pricing"><%= humanized_money_with_symbol(task.price) %></h2>
        <img src='https://kitt.lewagon.com/placeholder/users/krokrob' class="card_task_user avatar-bordered"/>
      </div>
    </div>
    <% end %>
  </div>

  <div
  id="map"
  style="width: 800px;
  height: 600px;"
  data-markers="<%= @markers.to_json %>"
  data-mapbox-api-key="<%= ENV['MAPBOX_API_KEY'] %>"
  ></div>

</div>

<div class="button_positioning" id="button_map">
<button type="button" class="btn btn-primary">Switch to map</button>
</div>

<script>




  // get element by id or class to find the button
  const showmap = document.getElementById("map");
  const cardgrid = document.getElementById("cardgrid");

  // add event listener for click to the button
  document.getElementById("button_map").addEventListener("click", (event) => {
    // showmap.style.display = "block";
    showmap.classList.toggle("map_display");
    cardgrid.classList.toggle("cards_hide");
    window.mapbox.resize();
    fitMapToMarkers(window.mapbox, window.markers);
    // cardgrid.style.display = "none";
});
  // add class with display none on the cards container

  // add class display blovk to the map t make it full screen
</script>

